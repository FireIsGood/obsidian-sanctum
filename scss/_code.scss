@use 'var';

.markdown-preview-view code,.markdown-preview-view pre {
	border-radius: var.$size-0;
}

.cm-s-obsidian .cm-math,
.cm-s-obsidian div.HyperMD-codeblock-begin-bg,
.cm-s-obsidian div.HyperMD-codeblock-bg,
.cm-s-obsidian div.HyperMD-codeblock-end-bg,
.cm-s-obsidian pre.HyperMD-codeblock,
.cm-s-obsidian span.cm-inline-code,
.markdown-preview-view code,
.markdown-preview-view div.el-pre pre,
.markdown-preview-view span.cm-inline-code,
.theme-dark code[class*=language-],
.theme-dark pre[class*=language-],
.theme-light code[class*=language-],
.theme-light pre[class*=language-] {
	font-family: var(--font-mono);
	font-weight: var(--font-medium);
	font-size: var.$font-scale-0;
	line-height: var.$leading-2;
	letter-spacing: var.$tracking-2;
	border-radius: 3px;
}

.theme-dark code[class*=language-],
.theme-dark pre[class*=language-],
.theme-light code[class*=language-],
.theme-light pre[class*=language-] {
	padding-top: 2px;
	padding-bottom: 2px;
}

.markdown-preview-view code,
.markdown-preview-view div.el-pre pre,
.markdown-preview-view span.cm-inline-code,
.theme-dark code[class*=language-],
.theme-dark pre[class*=language-],
.theme-light code[class*=language-],
.theme-light pre[class*=language-] {
	--background-primary-alt: hsl(30, 25%, 98.4%);
}

.theme-dark .markdown-preview-view code,
.theme-dark .markdown-preview-view div.el-pre pre,
.theme-dark .markdown-preview-view span.cm-inline-code,
.theme-dark code[class*=language-],
.theme-dark pre[class*=language-] {
	--background-primary-alt: hsl(0, 0%, 5%);
}

.cm-s-obsidian .cm-math,
.cm-s-obsidian span.cm-inline-code,
.markdown-preview-view span.cm-inline-code {
	font-size: var.$font-scale-0;
	line-height: var.$leading-0;
}

.markdown-preview-view div.el-pre pre:not(pre.frontmatter.language-yaml) {
	padding: var.$size-3
			 var.$size-8
			 var.$size-3
			 var.$size-5;
	white-space: wrap;
	width: 100%;
	border: 1px solid var(--color-primary-10);

	.theme-light & {
		border: 1px solid var(--color-primary-20);
	}
}

// preview
.markdown-preview-view code {
	color: var.$color-pink-500;
	padding: 0 4px;
	font-family: var(--font-mono);
}

.markdown-preview-view p code { // makes it only applies to inline code (the p is the filter)
	border: 1px solid var(--color-primary-10);
	
	.theme-light & {
		border-color: var(--color-primary-20);
	}
}

// edit
.cm-s-obsidian .cm-math,
.cm-s-obsidian .HyperMD-codeblock,
.cm-s-obsidian span.cm-inline-code {
	color: var.$color-pink-500;
}

.cm-s-obsidian span.cm-inline-code {
	border-radius: 4px;
}
/*
.cm-s-obsidian .cm-line:not(.cm-active.cm-line) span.cm-inline-code {
	outline: 1px solid var(--color-primary-10);
	padding: 0 4px;	
	.theme-light & {
		outline-color: var(--color-primary-20);
	}
}*/

//Live Preview
.markdown-source-view .HyperMD-codeblock.HyperMD-codeblock-bg.cm-line,
.cm-s-obsidian div.HyperMD-codeblock-begin-bg,
.cm-s-obsidian div.HyperMD-codeblock-end-bg {
	background-color: var(--color-primary-w);
	.theme-dark & {
		background-color: var.$color-dark;
	}
}

/* ────────────────────────────── Code Comments ───────────────────────────── */
.cm-s-obsidian .HyperMD-codeblock span.cm-comment,
.markdown-preview-view code .token.comment {
	font-weight: var(--font-light);
	font-style: normal;
}

/* ──────────────────────────── Copy Code Button ──────────────────────────── */
button.copy-code-button {
	display: block;
	content: "";
	-webkit-mask-image:  url("data:image/svg+xml,%3Csvg id='icon' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:none;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z' transform='translate(0)'/%3E%3Cpath d='M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z' transform='translate(0)'/%3E%3Crect id='_Transparent_Rectangle_' data-name='&lt;Transparent Rectangle&gt;' class='cls-1' width='32' height='32'/%3E%3C/svg%3E");
	-webkit-mask-repeat: no-repeat;
	transform: scale(1.6);
	background-repeat: no-repeat;
	color: currentColor;
	background-color: var(--text-normal);
	font-size: var.$size-0;
	position: absolute;
	top: 10px;
	right: var.$size-3;
	transition: transform var.$duration-fast-1 var.$motion-standard-expressive;
}

.copy-code-button:active {
	transform: scale(1.4); // makes it shrink a bit when clicked
	transition: transform var.$duration-fast-1 var.$motion-standard-expressive;
}

/* ───────────────────────────── Pure Text Block ──────────────────────────── */
code[class*=language-pure-text],
.markdown-preview-view div.el-pre pre[class*=language-pure-text],
.markdown-preview-view div.el-pre pre[class*=language-pure-text] .language-pure-text.is-loaded {
	color: var(--text-normal);
	font-family: var(--font-preview);
	font-weight: var(--font-regular);
	white-space: normal;
	text-shadow: transparent 0px 1px;
	hyphens: auto;
	background-color: transparent;
	padding-left: 0;
}